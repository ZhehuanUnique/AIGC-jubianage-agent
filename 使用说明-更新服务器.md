# 更新服务器使用说明

## ✅ SSH 密钥已配置完成

现在可以无密码连接服务器了！

## 📋 两种更新方式

### 方式一：在本地 Windows 运行 PowerShell 脚本（推荐）

**在 Cursor 终端（Windows）中运行：**

```powershell
.\快速更新服务器.ps1
```

这个脚本会：
1. 通过 SSH 连接到服务器（无需密码）
2. 在服务器上执行更新命令
3. 显示更新进度和结果

**注意**：`.ps1` 是 PowerShell 脚本，只能在 Windows 上运行，不能在 Linux 服务器上运行。

### 方式二：在服务器上直接运行 Bash 脚本

**先连接到服务器：**

```powershell
ssh ubuntu@119.45.121.152
```

**然后在服务器上运行：**

```bash
cd /var/www/aigc-agent
bash 更新线上部署.sh
```

或者：

```bash
cd /var/www/aigc-agent
bash 快速更新线上部署.sh
```

## 🎯 推荐流程

1. **在本地提交代码到 GitHub**
   ```powershell
   .\提交代码到GitHub.ps1
   ```

2. **在本地更新服务器（推荐）**
   ```powershell
   .\快速更新服务器.ps1
   ```

   或者：

3. **连接到服务器手动更新**
   ```powershell
   ssh ubuntu@119.45.121.152
   cd /var/www/aigc-agent
   bash 更新线上部署.sh
   ```

## ⚠️ 重要提示

- **`.ps1` 文件** = PowerShell 脚本，只能在 Windows 本地运行
- **`.sh` 文件** = Bash 脚本，只能在 Linux 服务器上运行
- **不要**在服务器上运行 `.ps1` 文件
- **不要**在 Windows 上直接运行 `.sh` 文件（除非使用 Git Bash 或 WSL）

## 🔍 如果遇到问题

### 问题：在服务器上运行 `.ps1` 文件报错

**原因**：`.ps1` 是 PowerShell 脚本，不能在 Linux 上运行

**解决**：
1. 在本地 Windows 运行 `.\快速更新服务器.ps1`
2. 或者在服务器上运行 `bash 更新线上部署.sh`

### 问题：SSH 连接失败

**检查**：
```powershell
ssh -o BatchMode=yes ubuntu@119.45.121.152 "echo 'test'"
```

如果失败，检查 SSH 密钥配置。

