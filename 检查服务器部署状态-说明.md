# æ£€æŸ¥æœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€

## ğŸ” æ£€æŸ¥æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨æ£€æŸ¥è„šæœ¬ï¼ˆæ¨èï¼‰

**PowerShellï¼š**
```powershell
.\æ£€æŸ¥æœåŠ¡å™¨éƒ¨ç½²çŠ¶æ€.ps1
```

**Git Bashï¼š**
```bash
bash æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨æ£€æŸ¥

**é€šè¿‡ SSH è¿æ¥åˆ°æœåŠ¡å™¨ï¼š**
```bash
ssh ubuntu@119.45.121.152
```

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**

```bash
# 1. æ£€æŸ¥ Git çŠ¶æ€
cd /var/www/aigc-agent
git status
git log --oneline -5

# 2. æ£€æŸ¥æ˜¯å¦æœ‰æœªæ‹‰å–çš„æ›´æ–°
git fetch origin
git log HEAD..origin/main --oneline

# 3. æ£€æŸ¥å…³é”®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la README.md å®Œæ•´æ›´æ–°æœåŠ¡å™¨.sh é€šè¿‡SSHéƒ¨ç½²åˆ°æœåŠ¡å™¨.ps1

# 4. æ£€æŸ¥å‰ç«¯æ„å»ºæ—¶é—´
ls -ld dist/
stat dist/index.html

# 5. æ£€æŸ¥ PM2 æœåŠ¡çŠ¶æ€
cd server
pm2 status aigc-agent
pm2 logs aigc-agent --lines 10 --nostream

# 6. æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
curl http://localhost:3002/api/health
```

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### âœ… ä»£ç æ›´æ–°æ£€æŸ¥

- [ ] Git çŠ¶æ€æ˜¾ç¤º "Your branch is up to date with 'origin/main'"
- [ ] æœ€æ–°æäº¤åŒ…å« "æ¸…ç†å¤šä½™çš„è„šæœ¬å’Œæ–‡æ¡£" æˆ–ç±»ä¼¼ä¿¡æ¯
- [ ] `git log HEAD..origin/main` æ²¡æœ‰è¾“å‡ºï¼ˆè¡¨ç¤ºå·²æ˜¯æœ€æ–°ï¼‰

### âœ… æ–‡ä»¶æ£€æŸ¥

- [ ] `README.md` å­˜åœ¨ä¸”å·²æ›´æ–°
- [ ] `å®Œæ•´æ›´æ–°æœåŠ¡å™¨.sh` å­˜åœ¨
- [ ] `é€šè¿‡SSHéƒ¨ç½²åˆ°æœåŠ¡å™¨.ps1` å­˜åœ¨
- [ ] `ä¿®å¤Milvusé‡å¯é—®é¢˜.bat` å­˜åœ¨

### âœ… å‰ç«¯æ„å»ºæ£€æŸ¥

- [ ] `dist/` ç›®å½•å­˜åœ¨
- [ ] `dist/index.html` å­˜åœ¨
- [ ] æ„å»ºæ—¶é—´æ˜¯æœ€æ–°çš„ï¼ˆæœ€è¿‘å‡ åˆ†é’Ÿå†…ï¼‰

### âœ… æœåŠ¡çŠ¶æ€æ£€æŸ¥

- [ ] PM2 æœåŠ¡çŠ¶æ€ä¸º "online"
- [ ] åç«¯å¥åº·æ£€æŸ¥è¿”å› `{"status":"ok"}` æˆ–ç±»ä¼¼
- [ ] æ²¡æœ‰é”™è¯¯æ—¥å¿—

## ğŸš¨ å¦‚æœå‘ç°æœªæ›´æ–°

### æƒ…å†µ1ï¼šä»£ç æœªæ‹‰å–

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**
```bash
cd /var/www/aigc-agent
git pull origin main
```

### æƒ…å†µ2ï¼šå‰ç«¯æœªé‡æ–°æ„å»º

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**
```bash
cd /var/www/aigc-agent
rm -rf dist node_modules/.vite
npm run build
sudo chown -R ubuntu:ubuntu dist/
sudo systemctl reload nginx
```

### æƒ…å†µ3ï¼šåç«¯æœåŠ¡æœªé‡å¯

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**
```bash
cd /var/www/aigc-agent/server
pm2 restart aigc-agent
pm2 save
```

### æƒ…å†µ4ï¼šæ‰§è¡Œå®Œæ•´æ›´æ–°

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š**
```bash
cd /var/www/aigc-agent
bash å®Œæ•´æ›´æ–°æœåŠ¡å™¨.sh
```

## ğŸ“ å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

**åœ¨æœ¬åœ°æ‰§è¡Œï¼ˆé€šè¿‡ SSHï¼‰ï¼š**
```bash
# æ£€æŸ¥ Git çŠ¶æ€
ssh ubuntu@119.45.121.152 "cd /var/www/aigc-agent && git status && git log --oneline -3"

# æ£€æŸ¥ PM2 çŠ¶æ€
ssh ubuntu@119.45.121.152 "cd /var/www/aigc-agent/server && pm2 status aigc-agent"

# æ£€æŸ¥åç«¯å¥åº·
ssh ubuntu@119.45.121.152 "curl -s http://localhost:3002/api/health"

# æ£€æŸ¥å‰ç«¯æ„å»ºæ—¶é—´
ssh ubuntu@119.45.121.152 "cd /var/www/aigc-agent && stat -c '%y' dist/index.html 2>/dev/null || stat -f '%Sm' dist/index.html"
```

---

**åˆ›å»ºæ—¶é—´**ï¼š2026-01-03  
**æœ€åæ›´æ–°**ï¼š2026-01-03

