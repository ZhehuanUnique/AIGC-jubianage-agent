# 服务器重启前后端 - 快速命令

## 方法1: 使用重启脚本（推荐）

```bash
# 进入项目目录（根据实际路径选择）
cd /home/ubuntu/AIGC-jubianage-agent
# 或者
cd ~/AIGC-jubianage-agent
# 或者（需要sudo）
sudo su -
cd /root/AIGC-jubianage-agent

# 执行重启脚本
chmod +x 服务器重启-前后端.sh
./服务器重启-前后端.sh
```

## 方法2: 手动执行命令

```bash
# 1. 进入项目目录
cd /home/ubuntu/AIGC-jubianage-agent  # 或实际路径

# 2. 拉取最新代码
git pull origin main

# 3. 构建前端
cd src
npm install
npm run build
cd ..

# 4. 安装后端依赖（如果需要）
cd server
npm install
cd ..

# 5. 重启后端服务
pm2 restart AIGC-jubianage-agent || pm2 start server/index.js --name AIGC-jubianage-agent

# 6. 检查服务状态
pm2 status

# 7. 查看日志
pm2 logs AIGC-jubianage-agent --lines 50
```

## 仅重启后端（前端无需重新构建时）

```bash
cd /home/ubuntu/AIGC-jubianage-agent
git pull origin main
cd server && npm install && cd ..
pm2 restart AIGC-jubianage-agent
pm2 status
```

## 仅重新构建前端（后端无需重启时）

```bash
cd /home/ubuntu/AIGC-jubianage-agent
cd src
npm install
npm run build
cd ..
```

## 验证重启

1. 检查前端构建：`ls -la src/dist`
2. 检查后端服务：`pm2 status`
3. 查看后端日志：`pm2 logs AIGC-jubianage-agent --lines 50`
4. 检查数据库表初始化：查看日志中是否有 "✅ first_last_frame_videos 表已存在" 或 "✅ first_last_frame_videos 表创建成功"

## 本次更新内容

1. ✅ 添加数据库表自动初始化功能
2. ✅ 服务器启动时自动创建缺失的表
3. ✅ 修复 first_last_frame_videos 表不存在的错误

