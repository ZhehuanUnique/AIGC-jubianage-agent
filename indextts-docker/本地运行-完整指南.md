# IndexTTS2.5 æœ¬åœ° Docker è¿è¡Œå®Œæ•´æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
cd indextts-docker
.\å¿«é€Ÿå¯åŠ¨.ps1
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨å¯åŠ¨

```powershell
cd indextts-docker

# 1. æ„å»ºé•œåƒ
docker-compose -f docker-compose.local.yml build

# 2. å¯åŠ¨æœåŠ¡
docker-compose -f docker-compose.local.yml up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.local.yml logs -f
```

## ğŸ“‹ å‰ç½®æ¡ä»¶æ£€æŸ¥

### 1. å®‰è£… Docker Desktop

å¦‚æœæœªå®‰è£…ï¼Œè¯·ä¸‹è½½å®‰è£…ï¼š
- ä¸‹è½½åœ°å€ï¼šhttps://www.docker.com/products/docker-desktop
- å®‰è£…åå¯åŠ¨ Docker Desktop

### 2. é…ç½® Docker æ–‡ä»¶å…±äº«

**é‡è¦**ï¼šå¿…é¡»å°† E ç›˜æ·»åŠ åˆ° Docker Desktop çš„æ–‡ä»¶å…±äº«åˆ—è¡¨

1. æ‰“å¼€ Docker Desktop
2. ç‚¹å‡»å³ä¸Šè§’ âš™ï¸ Settings
3. é€‰æ‹© Resources â†’ File Sharing
4. ç‚¹å‡» `+` æ·»åŠ  E ç›˜
5. ç‚¹å‡» Apply & Restart

### 3. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶

ç¡®ä¿ä»¥ä¸‹è·¯å¾„å­˜åœ¨ï¼š
- `E:\IndexTTS2.5\checkpoints\` - æ¨¡å‹ç›®å½•
- `E:\IndexTTS2.5\checkpoints\config.yaml` - é…ç½®æ–‡ä»¶

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### å¯åŠ¨æœåŠ¡

```powershell
docker-compose -f docker-compose.local.yml up -d
```

### åœæ­¢æœåŠ¡

```powershell
docker-compose -f docker-compose.local.yml down
```

### æŸ¥çœ‹æ—¥å¿—

```powershell
# å®æ—¶æ—¥å¿—
docker-compose -f docker-compose.local.yml logs -f

# æœ€è¿‘ 100 è¡Œæ—¥å¿—
docker-compose -f docker-compose.local.yml logs --tail=100
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```powershell
docker-compose -f docker-compose.local.yml ps
```

### é‡å¯æœåŠ¡

```powershell
docker-compose -f docker-compose.local.yml restart
```

### é‡æ–°æ„å»ºé•œåƒ

```powershell
docker-compose -f docker-compose.local.yml build --no-cache
docker-compose -f docker-compose.local.yml up -d
```

## ğŸ§ª æµ‹è¯• API

### å¥åº·æ£€æŸ¥

```powershell
curl http://localhost:8000/health
```

é¢„æœŸå“åº”ï¼š
```json
{
  "status": "healthy",
  "model_loaded": true
}
```

### æŸ¥çœ‹æ¨¡å‹ä¿¡æ¯

```powershell
curl http://localhost:8000/models
```

### æµ‹è¯• TTSï¼ˆéœ€è¦å‡†å¤‡éŸ³é¢‘æ–‡ä»¶ï¼‰

```powershell
# æ³¨æ„ï¼šéœ€è¦å°†éŸ³é¢‘æ–‡ä»¶è½¬æ¢ä¸º base64
curl -X POST http://localhost:8000/tts `
  -H "Content-Type: application/json" `
  -d '{
    "spk_audio_prompt": "base64_encoded_audio_here",
    "text": "æµ‹è¯•æ–‡æœ¬è½¬è¯­éŸ³",
    "output_format": "wav"
  }'
```

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Œæç¤ºè·¯å¾„ä¸å­˜åœ¨

**A:** æ£€æŸ¥ Docker Desktop æ–‡ä»¶å…±äº«è®¾ç½®ï¼Œç¡®ä¿ E ç›˜å·²æ·»åŠ åˆ°å…±äº«åˆ—è¡¨ã€‚

### Q2: æ¨¡å‹åŠ è½½å¤±è´¥

**A:** 
1. æ£€æŸ¥ `E:\IndexTTS2.5\checkpoints\config.yaml` æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥æ¨¡å‹æƒé‡æ–‡ä»¶æ˜¯å¦å®Œæ•´
3. æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š`docker-compose -f docker-compose.local.yml logs`

### Q3: ç«¯å£ 8000 è¢«å ç”¨

**A:** ä¿®æ”¹ `docker-compose.local.yml` ä¸­çš„ç«¯å£æ˜ å°„ï¼š
```yaml
ports:
  - "8001:8000"  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Q4: å†…å­˜ä¸è¶³

**A:** è°ƒæ•´èµ„æºé™åˆ¶ï¼ˆåœ¨ `docker-compose.local.yml` ä¸­ï¼‰ï¼š
```yaml
deploy:
  resources:
    limits:
      memory: 4G  # å‡å°‘å†…å­˜é™åˆ¶
```

## ğŸ”— æ›´æ–°åç«¯é…ç½®

åœ¨ `server/.env` ä¸­æ·»åŠ ï¼š

```env
# IndexTTS2.5 é…ç½®ï¼ˆæœ¬åœ°è¿è¡Œï¼‰
INDEXTTS_BASE_URL=http://localhost:8000
INDEXTTS_ENABLED=true
INDEXTTS_TIMEOUT=60000
```

å¦‚æœåç«¯åœ¨æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦ï¼š
1. é…ç½®ç«¯å£è½¬å‘ï¼Œæˆ–
2. ä½¿ç”¨æœ¬åœ° IP åœ°å€ï¼ˆå¦‚ `http://192.168.1.100:8000`ï¼‰

## ğŸ“Š ç›‘æ§æœåŠ¡

### æŸ¥çœ‹èµ„æºä½¿ç”¨

```powershell
docker stats indextts-api-local
```

### è¿›å…¥å®¹å™¨

```powershell
docker exec -it indextts-api-local bash
```

## ğŸ›‘ åœæ­¢å’Œæ¸…ç†

### åœæ­¢æœåŠ¡

```powershell
docker-compose -f docker-compose.local.yml down
```

### å®Œå…¨æ¸…ç†ï¼ˆåŒ…æ‹¬é•œåƒï¼‰

```powershell
docker-compose -f docker-compose.local.yml down --rmi all
```




